<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>91.定时器练习-倒计时</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		body{
			background-color: #000;
			display: flex;
			flex-direction: row;
			justify-content: center;
			height: 80vh;
			align-items: center;
		}
		#timer{
			color: #fff;
			font-size: 50px;
		}
	</style>
</head>
<body>
	<div id="timer">15:51:31</div>
</body>
<script>
	   function toStr(num){
        return num < 10 ? '0' + num : ''+num
    }

var elem=document.getElementById('timer')
var endtime = new Date('2020/09/21 16:23:45')
var lefttime =endtime.getTime()
var timer=0

function leftTimer(){
var today = Date.now()
var leftmilliseconds=lefttime-today
if(leftmilliseconds<0){
	leftmilliseconds=0
	clearInterval(timer)
}
       var allSeconds = parseInt(leftmilliseconds / 1000)

        var hours = parseInt(allSeconds / 3600)
        var minutes = parseInt((allSeconds % 3600) / 60)
        var seconds = (allSeconds % 3600) % 60

        elem.innerHTML = '距离活动结束还有 ' + toStr(hours) + ':' + toStr(minutes) + ':' +toStr(seconds)
    }

    timer = setInterval(leftTimer,500)
    leftTimer()
</script>
</html>